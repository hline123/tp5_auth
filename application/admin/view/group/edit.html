{extend name='base'/}
{block name='content'}
<ol class="breadcrumb" style="background-color: #f9f9f9;padding:8px 0;margin-bottom:10px;">
    <li>
        <a href=""><i class="fa fa-cogs"></i>
            用户组管理</a>
    </li>
    <li class="active">
        <a href="{:url('store')}">编辑用户组</a>
    </li>
</ol>
<ul class="nav nav-tabs" role="tablist">
    <li><a href="{:url('index')}">用户组列表</a></li>
    <li class="active"><a href="{:url('store')}">编辑用户组</a></li>
</ul>
<form method="post" class="form-horizontal" role="form">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">用户组编辑</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label class="col-sm-2 control-label">用户组名称</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="title" value="{$field.title}">
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default panel-all">
        <div class="panel-heading">
            <h3 class="panel-title">
                权限分配
                |
                <input type="checkbox" id="all"> 全选
            </h3>
        </div>
        <div class="panel-body">
            {foreach name="rules" item="vo" key="k"}
            <div class="panel panel-default">
                <div class="panel-heading group-all">
                    <h3 class="panel-title">
                        {$k}
                        |
                        <input type="checkbox" class="group"> 选择
                    </h3>
                </div>
                <div class="panel-body">
                    {foreach name="vo" item="v"}
                    <div class="checkbox-inline">
                        <label>
                            <input type="checkbox" name="rules[]" {if condition="in_array($v.id, $field.rules)"}checked{/if} value="{$v.id}">{$v.title}
                        </label>
                    </div>
                    {/foreach}
                </div>
            </div>
            {/foreach}
        </div>
    </div>
    <input type="hidden" name="id" value="{$field.id}">
    <button class="btn btn-primary">提交</button>
</form>
<script>
    $(function () {
        $('#all').click(function () {
            $(this).parents('.panel-all').find(".panel-body input[type='checkbox']")
                .prop('checked', $(this).prop('checked'));
        });
        $('.group').click(function () {
            $(this).parents('.group-all').siblings(".panel-body ").find("input[type='checkbox']")
                .prop('checked', $(this).prop('checked'));
        })
    })
</script>
{/block}